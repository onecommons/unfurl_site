<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Eval Expressions &mdash; Unfurl Documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon32.png"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/custom.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Command Line" href="cli.html" />
    <link rel="prev" title="YAML Merge directives" href="processing.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html">
            <img src="_static/unfurl_logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="README.html#installation">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="get-started-step-by-step.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="ensembles.html">Ensembles</a></li>
<li class="toctree-l1"><a class="reference internal" href="projects.html">Unfurl Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="secrets.html">Managing Secrets</a></li>
<li class="toctree-l1"><a class="reference internal" href="tosca.html">TOSCA</a></li>
<li class="toctree-l1"><a class="reference internal" href="jobs.html">Jobs and Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtime.html">Runtime Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="configurators.html">Configurators</a></li>
<li class="toctree-l1"><a class="reference internal" href="configurators.html#installers">Installers</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing.html">YAML Merge directives</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Eval Expressions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#expression-query-syntax">Expression Query Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="#expression-function-syntax">Expression Function Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tosca-functions-and-other-stand-alone-functions">TOSCA functions and other stand-alone functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#concat">concat</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-artifact">get_artifact</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-attribute">get_attribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-env">get_env</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-input">get_input</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-nodes-of-type">get_nodes_of_type</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-property">get_property</a></li>
<li class="toctree-l3"><a class="reference internal" href="#has-env">has_env</a></li>
<li class="toctree-l3"><a class="reference internal" href="#join">join</a></li>
<li class="toctree-l3"><a class="reference internal" href="#q">q</a></li>
<li class="toctree-l3"><a class="reference internal" href="#token">token</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#expression-functions">Expression Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#abspath">abspath</a></li>
<li class="toctree-l3"><a class="reference internal" href="#and">and</a></li>
<li class="toctree-l3"><a class="reference internal" href="#eq">eq</a></li>
<li class="toctree-l3"><a class="reference internal" href="#external">external</a></li>
<li class="toctree-l3"><a class="reference internal" href="#file">file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#foreach">foreach</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-dir">get_dir</a></li>
<li class="toctree-l3"><a class="reference internal" href="#if">if</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lookup">lookup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#local">local</a></li>
<li class="toctree-l3"><a class="reference internal" href="#or">or</a></li>
<li class="toctree-l3"><a class="reference internal" href="#not">not</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python">python</a></li>
<li class="toctree-l3"><a class="reference internal" href="#secret">secret</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sensitive">sensitive</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tempfile">tempfile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#template">template</a></li>
<li class="toctree-l3"><a class="reference internal" href="#validate">validate</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#semantics">Semantics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#special-keys">Special keys</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="jsonschema.html">Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="toscaref.html">TOSCA Language Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Python API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Unfurl</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Eval Expressions</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/expressions.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="eval-expressions">
<h1><a class="toc-backref" href="#id2">Eval Expressions</a><a class="headerlink" href="#eval-expressions" title="Permalink to this headline">ÔÉÅ</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#eval-expressions" id="id2">Eval Expressions</a></p>
<ul>
<li><p><a class="reference internal" href="#expression-query-syntax" id="id3">Expression Query Syntax</a></p></li>
<li><p><a class="reference internal" href="#expression-function-syntax" id="id4">Expression Function Syntax</a></p></li>
<li><p><a class="reference internal" href="#tosca-functions-and-other-stand-alone-functions" id="id5">TOSCA functions and other stand-alone functions</a></p>
<ul>
<li><p><a class="reference internal" href="#concat" id="id6">concat</a></p></li>
<li><p><a class="reference internal" href="#get-artifact" id="id7">get_artifact</a></p></li>
<li><p><a class="reference internal" href="#get-attribute" id="id8">get_attribute</a></p></li>
<li><p><a class="reference internal" href="#get-env" id="id9">get_env</a></p></li>
<li><p><a class="reference internal" href="#get-input" id="id10">get_input</a></p></li>
<li><p><a class="reference internal" href="#get-nodes-of-type" id="id11">get_nodes_of_type</a></p></li>
<li><p><a class="reference internal" href="#get-property" id="id12">get_property</a></p></li>
<li><p><a class="reference internal" href="#has-env" id="id13">has_env</a></p></li>
<li><p><a class="reference internal" href="#join" id="id14">join</a></p></li>
<li><p><a class="reference internal" href="#q" id="id15">q</a></p></li>
<li><p><a class="reference internal" href="#token" id="id16">token</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#expression-functions" id="id17">Expression Functions</a></p>
<ul>
<li><p><a class="reference internal" href="#abspath" id="id18">abspath</a></p></li>
<li><p><a class="reference internal" href="#and" id="id19">and</a></p></li>
<li><p><a class="reference internal" href="#eq" id="id20">eq</a></p></li>
<li><p><a class="reference internal" href="#external" id="id21">external</a></p></li>
<li><p><a class="reference internal" href="#file" id="id22">file</a></p></li>
<li><p><a class="reference internal" href="#foreach" id="id23">foreach</a></p></li>
<li><p><a class="reference internal" href="#get-dir" id="id24">get_dir</a></p></li>
<li><p><a class="reference internal" href="#if" id="id25">if</a></p></li>
<li><p><a class="reference internal" href="#lookup" id="id26">lookup</a></p></li>
<li><p><a class="reference internal" href="#local" id="id27">local</a></p></li>
<li><p><a class="reference internal" href="#or" id="id28">or</a></p></li>
<li><p><a class="reference internal" href="#not" id="id29">not</a></p></li>
<li><p><a class="reference internal" href="#python" id="id30">python</a></p></li>
<li><p><a class="reference internal" href="#secret" id="id31">secret</a></p></li>
<li><p><a class="reference internal" href="#sensitive" id="id32">sensitive</a></p></li>
<li><p><a class="reference internal" href="#tempfile" id="id33">tempfile</a></p></li>
<li><p><a class="reference internal" href="#template" id="id34">template</a></p></li>
<li><p><a class="reference internal" href="#validate" id="id35">validate</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#semantics" id="id36">Semantics</a></p></li>
<li><p><a class="reference internal" href="#special-keys" id="id37">Special keys</a></p></li>
</ul>
</li>
</ul>
</div>
<p>When jobs are run Unfurl expressions that appear in the YAML configuration files are processed.</p>
<section id="expression-query-syntax">
<h2><a class="toc-backref" href="#id3">Expression Query Syntax</a><a class="headerlink" href="#expression-query-syntax" title="Permalink to this headline">ÔÉÅ</a></h2>
<pre>
<strong id="grammar-token-expr">expr   </strong> ::=  segment? (&quot;::&quot; segment)*
<strong id="grammar-token-segment">segment</strong> ::=  [key] (&quot;[&quot; filter &quot;]&quot;)* [&quot;?&quot;]
<strong id="grammar-token-key">key    </strong> ::=  name | integer | var | &quot;*&quot;
<strong id="grammar-token-filter">filter </strong> ::=  ['!'] [expr] [(&quot;!=&quot; | &quot;=&quot;) test]
<strong id="grammar-token-test">test   </strong> ::=  var | ([^$[]:?])+
<strong id="grammar-token-var">var    </strong> ::=  &quot;$&quot; name
</pre>
</section>
<section id="expression-function-syntax">
<h2><a class="toc-backref" href="#id4">Expression Function Syntax</a><a class="headerlink" href="#expression-function-syntax" title="Permalink to this headline">ÔÉÅ</a></h2>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 24%" />
<col style="width: 41%" />
<col style="width: 35%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>eval</p></td>
<td><p>expr or func</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>vars?</p></td>
<td><p>map</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>select?</p></td>
<td><p>expr</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>foreach?</p></td>
<td><p>{key?, value?}</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>trace?</p></td>
<td><p>integer</p></td>
<td></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="tosca-functions-and-other-stand-alone-functions">
<h2><a class="toc-backref" href="#id5">TOSCA functions and other stand-alone functions</a><a class="headerlink" href="#tosca-functions-and-other-stand-alone-functions" title="Permalink to this headline">ÔÉÅ</a></h2>
<p>Stand-alone functions don‚Äôt need to be wrapped in an ‚Äúeval‚Äù</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 78%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#concat"><span class="std std-ref">concat</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">string*</span> <span class="pre">]</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#get-artifact"><span class="std std-ref">get_artifact</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">instance_name,</span> <span class="pre">artifact_name]</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#get-attribute"><span class="std std-ref">get_attribute</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">instance_name,</span> <span class="pre">req_or_cap_name?,</span> <span class="pre">property_name,</span> <span class="pre">index_or_key*</span> <span class="pre">]</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#get-env"><span class="std std-ref">get_env</span></a></p></td>
<td><p><code class="regexp docutils literal notranslate"><span class="pre">[</span> <span class="pre">name,</span> <span class="pre">default?</span> <span class="pre">return</span> <span class="pre">]</span> <span class="pre">|</span> <span class="pre">name</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#get-input"><span class="std std-ref">get_input</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#get-nodes-of-type"><span class="std std-ref">get_nodes_of_type</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">type_name</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#get-property"><span class="std std-ref">get_property</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">instance_name,</span> <span class="pre">req_or_cap_name?,</span> <span class="pre">property_name,</span> <span class="pre">index_or_key*</span> <span class="pre">]</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#has-env"><span class="std std-ref">has_env</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#join"><span class="std std-ref">join</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">string+,</span> <span class="pre">delimiter?</span> <span class="pre">]</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#q"><span class="std std-ref">q</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">any</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#token"><span class="std std-ref">token</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">string,</span> <span class="pre">token,</span> <span class="pre">index]</span></code></p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<section id="concat">
<h3><a class="toc-backref" href="#id6">concat</a><a class="headerlink" href="#concat" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><p>The concat function is used to concatenate two or more string values. See <a class="reference external" href="_static/TOSCA-Simple-Profile-YAML-v1.3-os-toc.html#_Toc454458585">concat</a>.
<code class="docutils literal notranslate"><span class="pre">concat</span></code> can optionally take a <code class="docutils literal notranslate"><span class="pre">sep</span></code> keyword argument the specifies as a string the separator to use when joining the list.</p>
</div></blockquote>
</section>
<section id="get-artifact">
<h3><a class="toc-backref" href="#id7">get_artifact</a><a class="headerlink" href="#get-artifact" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><p>The get_artifact function is used to retrieve artifact location between modelable entities defined in the same service template.</p>
<p>If the artifact is a Docker image, return the image name in the form of
‚Äúregistry/repository/name:tag‚Äù or ‚Äúregistry/repository/name&#64;sha256:digest‚Äù</p>
<p>If entity_name or artifact_name is not found return <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p>
<p>See <a class="reference external" href="_static/TOSCA-Simple-Profile-YAML-v1.3-os-toc.html#_Toc50125538">get_artifact</a>.</p>
</div></blockquote>
</section>
<section id="get-attribute">
<h3><a class="toc-backref" href="#id8">get_attribute</a><a class="headerlink" href="#get-attribute" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><p>The get_attribute function is used to retrieve the values of named attributes declared by the referenced node or relationship template name.
See <a class="reference external" href="_static/TOSCA-Simple-Profile-YAML-v1.3-os-toc.html#_Toc50125522">TOSCA Attribute Functions</a>.</p>
</div></blockquote>
</section>
<section id="get-env">
<h3><a class="toc-backref" href="#id9">get_env</a><a class="headerlink" href="#get-env" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><p>Returns the value of the given environment variable name.
If NAME is not present in the environment, return the given default value if supplied or return None.</p>
<p>e.g. {get_env: NAME} or {get_env: [NAME, default]}</p>
<p>If the value of its argument is empty (e.g. [] or null), return the entire dictionary.</p>
</div></blockquote>
</section>
<section id="get-input">
<span id="id1"></span><h3><a class="toc-backref" href="#id10">get_input</a><a class="headerlink" href="#get-input" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><p>The get_input function is used to retrieve the values of properties declared within the inputs section of a TOSCA Service Template.
See <a class="reference external" href="_static/TOSCA-Simple-Profile-YAML-v1.3-os-toc.html#_Toc50125513">TOSCA Property Functions</a></p>
</div></blockquote>
</section>
<section id="get-nodes-of-type">
<h3><a class="toc-backref" href="#id11">get_nodes_of_type</a><a class="headerlink" href="#get-nodes-of-type" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><p>The get_nodes_of_type function can be used to retrieve a list of all known instances of nodes of the declared Node Type.</p>
</div></blockquote>
</section>
<section id="get-property">
<h3><a class="toc-backref" href="#id12">get_property</a><a class="headerlink" href="#get-property" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><p>The get_property function is used to retrieve property values between modelable entities defined in the same service template.
See <a class="reference external" href="_static/TOSCA-Simple-Profile-YAML-v1.3-os-toc.html#_Toc26969456">TOSCA Property Functions</a></p>
</div></blockquote>
</section>
<section id="has-env">
<h3><a class="toc-backref" href="#id13">has_env</a><a class="headerlink" href="#has-env" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><p>The <code class="docutils literal notranslate"><span class="pre">has_env</span></code> function returns a boolean indicating whether the given variable is found in the current environment.</p>
</div></blockquote>
</section>
<section id="join">
<h3><a class="toc-backref" href="#id14">join</a><a class="headerlink" href="#join" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><p>The join function is used to join an array of strings into a single string with optional delimiter. See</p>
</div></blockquote>
</section>
<section id="q">
<h3><a class="toc-backref" href="#id15">q</a><a class="headerlink" href="#q" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><p>Quote the given value without evaluating it.
For example:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">q</span><span class="p">:</span>
  <span class="nt">eval</span><span class="p">:</span>
     <span class="l l-Scalar l-Scalar-Plain">this will not be evaluated</span>
</pre></div>
</div>
<p>Will evaluate to:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">eval</span><span class="p">:</span>
   <span class="l l-Scalar l-Scalar-Plain">this will not be evaluated</span>
</pre></div>
</div>
<p>without any further evaluation.</p>
</div></blockquote>
</section>
<section id="token">
<h3><a class="toc-backref" href="#id16">token</a><a class="headerlink" href="#token" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><p>The token function is used on a string to parse out (tokenize) substrings separated by one or more token characters within a larger string.</p>
</div></blockquote>
</section>
</section>
<section id="expression-functions">
<h2><a class="toc-backref" href="#id17">Expression Functions</a><a class="headerlink" href="#expression-functions" title="Permalink to this headline">ÔÉÅ</a></h2>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 34%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#abspath"><span class="std std-ref">abspath</span></a></p></td>
<td><p>path | [path, location, mkdir?]</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#and"><span class="std std-ref">and</span></a></p></td>
<td><p>[test+]</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#eq"><span class="std std-ref">eq</span></a></p></td>
<td><p>[a, b]</p></td>
</tr>
<tr class="row-odd"><td><p>external</p></td>
<td><p>name</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#file"><span class="std std-ref">file</span></a></p></td>
<td><p>(see below)</p></td>
</tr>
<tr class="row-odd"><td><p>foreach</p></td>
<td><p>{key?, value?}</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#get-dir"><span class="std std-ref">get_dir</span></a></p></td>
<td><p>location | [location, mkdir?]</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#if"><span class="std std-ref">if</span></a></p></td>
<td><p>(see below)</p></td>
</tr>
<tr class="row-even"><td><p>local</p></td>
<td><p>name</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#lookup"><span class="std std-ref">lookup</span></a></p></td>
<td><p>(see below)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#or"><span class="std std-ref">or</span></a></p></td>
<td><p>[test+]</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#not"><span class="std std-ref">not</span></a></p></td>
<td><p>expr</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#python"><span class="std std-ref">python</span></a></p></td>
<td><p>path#function_name | module.function_name</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#secret"><span class="std std-ref">secret</span></a></p></td>
<td><p>name</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sensitive"><span class="std std-ref">sensitive</span></a></p></td>
<td><p>any</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#tempfile"><span class="std std-ref">tempfile</span></a></p></td>
<td><p>(see below)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#template"><span class="std std-ref">template</span></a></p></td>
<td><p>contents</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#validate"><span class="std std-ref">validate</span></a></p></td>
<td><p>[contents, schema]</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<section id="abspath">
<h3><a class="toc-backref" href="#id18">abspath</a><a class="headerlink" href="#abspath" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">path</dt>
<dd class="field-odd"><p>A file path</p>
</dd>
<dt class="field-even">location</dt>
<dd class="field-even"><p>(optional) A named folder (see <a class="reference internal" href="#get-dir"><span class="std std-ref">get_dir</span></a>)</p>
</dd>
<dt class="field-odd">mkdir</dt>
<dd class="field-odd"><p>(default: false) If true, create the folder if missing.</p>
</dd>
</dl>
<p>Get the absolute path to the given path. If <code class="docutils literal notranslate"><span class="pre">location</span></code> is supplied it will be
relative to that location (see <a class="reference internal" href="#get-dir"><span class="std std-ref">get_dir</span></a>) otherwise it will be relative to the current directory.</p>
<p>Also available as a jinja2 filter.</p>
</div></blockquote>
</section>
<section id="and">
<h3><a class="toc-backref" href="#id19">and</a><a class="headerlink" href="#and" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><p>Evaluates each expression in the list until an expression evaluates as false and
returns the result of the last expression evaluated.</p>
</div></blockquote>
</section>
<section id="eq">
<h3><a class="toc-backref" href="#id20">eq</a><a class="headerlink" href="#eq" title="Permalink to this headline">ÔÉÅ</a></h3>
</section>
<section id="external">
<h3><a class="toc-backref" href="#id21">external</a><a class="headerlink" href="#external" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><p>Return an instance</p>
</div></blockquote>
</section>
<section id="file">
<h3><a class="toc-backref" href="#id22">file</a><a class="headerlink" href="#file" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><p>Read or write a file. If the <code class="docutils literal notranslate"><span class="pre">contents</span></code> keyword argument is present, a file will be written
upon evaluation of this function, otherwise it will be read.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="c1"># read</span>
<span class="nt">eval</span><span class="p">:</span>
  <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">foo/local.config</span>
<span class="nt">select</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">contents</span>

<span class="c1"># write</span>
<span class="nt">eval</span><span class="p">:</span>
  <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">path.txt.vault</span>
  <span class="nt">contents</span><span class="p">:</span> <span class="s">&quot;this</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">saved</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">vault</span><span class="nv"> </span><span class="s">encrypted</span><span class="nv"> </span><span class="s">file&quot;</span>
  <span class="nt">encoding</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">vault</span>
<span class="nt">select</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">path</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 87%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>file:</p></td>
<td><p>path</p></td>
</tr>
<tr class="row-odd"><td><p>dir?:</p></td>
<td><p>path</p></td>
</tr>
<tr class="row-even"><td><p>encoding?</p></td>
<td><p>‚Äúbinary‚Äù | ‚Äúvault‚Äù | ‚Äújson‚Äù | ‚Äúyaml‚Äù | python_text_encoding</p></td>
</tr>
<tr class="row-odd"><td><p>contents?</p></td>
<td><p>any</p></td>
</tr>
</tbody>
</table>
<p><code class="docutils literal notranslate"><span class="pre">encoding</span></code> can be ‚Äúbinary‚Äù, ‚Äúvault‚Äù, ‚Äújson‚Äù, ‚Äúyaml‚Äù or an encoding registered with the Python codec registry</p>
<p>The <code class="docutils literal notranslate"><span class="pre">select</span></code> clause can evaluate the following keys:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Returns</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>path:</p></td>
<td><p>absolute path of the file</p></td>
</tr>
<tr class="row-odd"><td><p>encoding</p></td>
<td><p>encoding of the file</p></td>
</tr>
<tr class="row-even"><td><p>contents?</p></td>
<td><p>file contents (None if it doesn‚Äôt exist)</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="foreach">
<h3><a class="toc-backref" href="#id23">foreach</a><a class="headerlink" href="#foreach" title="Permalink to this headline">ÔÉÅ</a></h3>
</section>
<section id="get-dir">
<h3><a class="toc-backref" href="#id24">get_dir</a><a class="headerlink" href="#get-dir" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">location</dt>
<dd class="field-odd"><p>a named folder</p>
</dd>
<dt class="field-even">mkdir</dt>
<dd class="field-even"><p>(default: false) If true, create the folder if missing.</p>
</dd>
</dl>
<p>Return an absolute path to the given named folder where <code class="docutils literal notranslate"><span class="pre">name</span></code> is one of:</p>
<dl class="field-list simple">
<dt class="field-odd">.</dt>
<dd class="field-odd"><p>Directory that contains the current instance‚Äôs ensemble</p>
</dd>
<dt class="field-even">src</dt>
<dd class="field-even"><p>Directory of the source file this expression appears in</p>
</dd>
<dt class="field-odd">artifacts</dt>
<dd class="field-odd"><p>Directory for the current instance (committed to repository).</p>
</dd>
<dt class="field-even">local</dt>
<dd class="field-even"><p>The ‚Äúlocal‚Äù directory for the current instance (excluded from repository)</p>
</dd>
<dt class="field-odd">secrets</dt>
<dd class="field-odd"><p>The ‚Äúsecrets‚Äù directory for the current instance (files written there are vault encrypted when committed to the repository)</p>
</dd>
<dt class="field-even">tmp</dt>
<dd class="field-even"><p>A temporary directory for the instance (removed after unfurl exits)</p>
</dd>
<dt class="field-odd">tasks</dt>
<dd class="field-odd"><p>Job specific directory for the current instance (excluded from repository).</p>
</dd>
<dt class="field-even">operation</dt>
<dd class="field-even"><p>Operation specific directory for the current instance (excluded from repository).</p>
</dd>
<dt class="field-odd">workflow</dt>
<dd class="field-odd"><p>Workflow specific directory for the current instance (excluded from repository).</p>
</dd>
<dt class="field-even">spec.src</dt>
<dd class="field-even"><p>The directory of the source file the current instance‚Äôs template appears in.</p>
</dd>
<dt class="field-odd">spec.home</dt>
<dd class="field-odd"><p>Directory unique to current instance‚Äôs TOSCA template (committed to the spec repository).</p>
</dd>
<dt class="field-even">spec.local</dt>
<dd class="field-even"><p>Local directory unique to current instance‚Äôs TOSCA template (excluded from repository).</p>
</dd>
<dt class="field-odd">project</dt>
<dd class="field-odd"><p>The root directory of the current project.</p>
</dd>
<dt class="field-even">unfurl.home</dt>
<dd class="field-even"><p>The location of home project (UNFURL_HOME).</p>
</dd>
</dl>
<p>Otherwise look for a repository with the given name and return its path or None if not found.</p>
<p>Also available as a jinja2 filter.</p>
</div></blockquote>
</section>
<section id="if">
<h3><a class="toc-backref" href="#id25">if</a><a class="headerlink" href="#if" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 79%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>if</p></td>
<td><p>mapped_value</p></td>
</tr>
<tr class="row-odd"><td><p>then?</p></td>
<td><p>expr</p></td>
</tr>
<tr class="row-even"><td><p>else?</p></td>
<td><p>expr</p></td>
</tr>
</tbody>
</table>
<p>Example: this will always evaluate to ‚Äúexpected‚Äù:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">eval</span><span class="p">:</span>
  <span class="nt">if</span><span class="p">:</span>
    <span class="nt">or</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">not</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$a</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">$a</span>
  <span class="nt">then</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">expected</span>
  <span class="nt">else</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">unexpected</span>
<span class="nt">vars</span><span class="p">:</span>
  <span class="nt">a</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="lookup">
<h3><a class="toc-backref" href="#id26">lookup</a><a class="headerlink" href="#lookup" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 78%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>lookup</p></td>
<td><p>{name: args,
kwargs*: value}</p></td>
</tr>
</tbody>
</table>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">eval</span><span class="p">:</span>
  <span class="nt">lookup</span><span class="p">:</span>
    <span class="nt">env</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">TEST_ENV</span>

<span class="nt">eval</span><span class="p">:</span>
  <span class="nt">lookup</span><span class="p">:</span>
    <span class="nt">env</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">TEST_ENV</span><span class="p p-Indicator">,</span> <span class="nv">default</span><span class="p p-Indicator">]</span>

<span class="nt">eval</span><span class="p">:</span>
  <span class="nt">lookup</span><span class="p">:</span>
    <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://example.com/foo.txt</span>
    <span class="nt">validate_certs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="local">
<h3><a class="toc-backref" href="#id27">local</a><a class="headerlink" href="#local" title="Permalink to this headline">ÔÉÅ</a></h3>
</section>
<section id="or">
<h3><a class="toc-backref" href="#id28">or</a><a class="headerlink" href="#or" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><p>Evaluates each item until an item evaluates as true, returns that value or false.</p>
</div></blockquote>
</section>
<section id="not">
<h3><a class="toc-backref" href="#id29">not</a><a class="headerlink" href="#not" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><p>Evaluates the item and returns its negation.</p>
</div></blockquote>
</section>
<section id="python">
<h3><a class="toc-backref" href="#id30">python</a><a class="headerlink" href="#python" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 84%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>python</p></td>
<td><p>path#function_name | module.function_name</p></td>
</tr>
<tr class="row-odd"><td><p>args?</p></td>
<td><p>mapped_value</p></td>
</tr>
</tbody>
</table>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">eval</span><span class="p">:</span>
  <span class="nt">python</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">path/to/src.py#func</span>

<span class="c1"># or:</span>

<span class="nt">eval</span><span class="p">:</span>
  <span class="nt">python</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python_module.func</span>

<span class="c1"># with args:</span>

<span class="nt">eval</span><span class="p">:</span>
  <span class="nt">python</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python_module.func</span>
  <span class="nt">args</span><span class="p">:</span>   <span class="l l-Scalar l-Scalar-Plain">foo</span>
</pre></div>
</div>
<p>Execute the given python function and evaluate to its return value.
If the path to the python script is a relative path, it will be treated as relative to the current source file
(ie. the template file that is invoking the expression).
The function will being invoke the current <a class="reference internal" href="api.html#unfurl.eval.RefContext" title="unfurl.eval.RefContext"><code class="xref any py py-class docutils literal notranslate"><span class="pre">RefContext</span></code></a> as the first argument.
If <code class="docutils literal notranslate"><span class="pre">args</span></code> is declared, its value will passed as a second argument to the function.</p>
</div></blockquote>
</section>
<section id="secret">
<h3><a class="toc-backref" href="#id31">secret</a><a class="headerlink" href="#secret" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><p>Return the value of the given secret. It will be marked as sensitive.</p>
</div></blockquote>
</section>
<section id="sensitive">
<h3><a class="toc-backref" href="#id32">sensitive</a><a class="headerlink" href="#sensitive" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><p>Mark the given value as sensitive.</p>
</div></blockquote>
</section>
<section id="tempfile">
<h3><a class="toc-backref" href="#id33">tempfile</a><a class="headerlink" href="#tempfile" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><p>Create local, temporary file with the specified content.
It will be deleted after <code class="docutils literal notranslate"><span class="pre">unfurl</span></code> process exits.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">eval</span><span class="p">:</span>
  <span class="nt">tempfile</span><span class="p">:</span> <span class="s">&quot;contents&quot;</span>
  <span class="nt">encoding</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">vault</span>
  <span class="nt">suffix</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.json</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 87%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>tempfile</p></td>
<td><p>contents</p></td>
</tr>
<tr class="row-odd"><td><p>encoding?</p></td>
<td><p>‚Äúbinary‚Äù | ‚Äúvault‚Äù | ‚Äújson‚Äù | ‚Äúyaml‚Äù | python_text_encoding</p></td>
</tr>
<tr class="row-even"><td><p>suffix?</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>If <code class="docutils literal notranslate"><span class="pre">encoding</span></code> isn‚Äôt specified, the file extension specified by <code class="docutils literal notranslate"><span class="pre">suffix</span></code> is used;
if neither is specified, the encoding will be determined by the content, either utf8 text, binary or json or a 0 byte file if the content is null.</p>
</div></blockquote>
</section>
<section id="template">
<h3><a class="toc-backref" href="#id34">template</a><a class="headerlink" href="#template" title="Permalink to this headline">ÔÉÅ</a></h3>
<p>Evaluate file or inline contents as an Ansible-flavored Jinja2 template.</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">eval</span><span class="p">:</span>
  <span class="nt">template</span><span class="p">:</span>
    <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">path/to/template.j2</span>
</pre></div>
</div>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="nt">eval</span><span class="p">:</span>
  <span class="nt">template</span><span class="p">:</span> <span class="p p-Indicator">&gt;</span>
    <span class="no">{%if testVar %}success{%else%}failed{%endif%}</span>
<span class="nt">vars</span><span class="p">:</span>
  <span class="nt">testVar</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
</section>
<section id="validate">
<h3><a class="toc-backref" href="#id35">validate</a><a class="headerlink" href="#validate" title="Permalink to this headline">ÔÉÅ</a></h3>
<blockquote>
<div><p>Return true if the first argument conforms to the JSON schema supplied as the second argument.</p>
</div></blockquote>
</section>
</section>
<section id="semantics">
<h2><a class="toc-backref" href="#id36">Semantics</a><a class="headerlink" href="#semantics" title="Permalink to this headline">ÔÉÅ</a></h2>
<p>Each segment specifies a key in a resource or JSON/YAML object.
‚Äú::‚Äù is used as the segment delimitated to allow for keys that contain ‚Äú.‚Äù and ‚Äú/‚Äù</p>
<p>Path expressions evaluations always start with a list of one or more Resources.
and each segment selects the value associated with that key.
If segment has one or more filters
each filter is applied to that value ‚Äì each is treated as a predicate
that decides whether value is included or not in the results.
If the filter doesn‚Äôt include a test the filter tests the existence or non-existence of the expression,
depending on whether the expression is prefixed with a ‚Äú!‚Äù.
If the filter includes a test the left side of the test needs to match the right side.
If the right side is not a variable, that string will be coerced to left side‚Äôs type before comparing it.
If the left-side expression is omitted, the value of the segment‚Äôs key is used and if that is missing, the current value is used.</p>
<p>If the current value is a list and the key looks like an integer
it will be treated like a zero-based index into the list.
Otherwise the segment is evaluated again all values in the list and resulting value is a list.
If the current value is a dictionary and the key is ‚Äú*‚Äù, all values will be selected.</p>
<p>If a segment ends in ‚Äú?‚Äù, it will only include the first match.
In other words, ‚Äúa?::b::c‚Äù is a shorthand for ‚Äúa[b::c]::0::b::c‚Äù.
This is useful to guarantee the result of evaluating expression is always a single result.</p>
<p>The first segment:
If the first segment is a variable reference the current value is set to that variable‚Äôs value.
If the key in the first segment is empty (e.g. the expression starts with ‚Äò::‚Äô) the current value will be set to the evaluation of ‚Äò.all‚Äô.
If the key in the first segment starts with ‚Äò.‚Äô it is evaluated against the initial ‚Äúcurrent resource‚Äù.
Otherwise, the current value is set to the evaluation of ‚Äú.ancestors?‚Äù. In other words,
the expression will be the result of evaluating it against the first ancestor of the current resource that it matches.</p>
<p>If key or test needs to be a non-string type or contains a unallowed character use a var reference instead.</p>
<p>When multiple steps resolve to lists the resultant lists are flattened.
However if the final set of matches contain values that are lists those values are not flattened.</p>
<p>For example, given:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nx">x</span><span class="o">:</span> <span class="p">[</span> <span class="p">{</span>
        <span class="nx">a</span><span class="o">:</span> <span class="p">[{</span><span class="nx">c</span><span class="o">:</span><span class="mf">1</span><span class="p">},</span> <span class="p">{</span><span class="nx">c</span><span class="o">:</span><span class="mf">2</span><span class="p">}]</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nx">a</span><span class="o">:</span> <span class="p">[{</span><span class="nx">c</span><span class="o">:</span><span class="mf">3</span><span class="p">},</span> <span class="p">{</span><span class="nx">c</span><span class="o">:</span><span class="mf">4</span><span class="p">}]</span>
      <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">x:a:c</span></code> resolves to:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">[1,2,3,4]</span></code></p>
</dd>
<dt>not</dt><dd><p><code class="docutils literal notranslate"><span class="pre">[[1,2],</span> <span class="pre">[3,4]])</span></code></p>
</dd>
</dl>
<p>(Justification: It is inconvenient and fragile to tie data structures to the particular form of a query.
If you want preserve structure (e.g. to know which values are part
of which parent value or resource) use a less deep path and iterate over results.)</p>
</section>
<section id="special-keys">
<h2><a class="toc-backref" href="#id37">Special keys</a><a class="headerlink" href="#special-keys" title="Permalink to this headline">ÔÉÅ</a></h2>
<p>Built-in keys start with a leading <strong>.</strong>:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>.</strong></p></td>
<td><p>self</p></td>
</tr>
<tr class="row-even"><td><p><strong>..</strong></p></td>
<td><p>parent</p></td>
</tr>
<tr class="row-odd"><td><p>.name</p></td>
<td><p>name of this instance</p></td>
</tr>
<tr class="row-even"><td><p>.type</p></td>
<td><p>name of instance‚Äôs TOSCA type</p></td>
</tr>
<tr class="row-odd"><td><p>.tosca_id</p></td>
<td><p>unique id of this instance</p></td>
</tr>
<tr class="row-even"><td><p>.tosca_name</p></td>
<td><p>name of the instance‚Äôs TOSCA template</p></td>
</tr>
<tr class="row-odd"><td><p>.status</p></td>
<td><p>the instance‚Äôs <a class="reference internal" href="api.html#unfurl.support.Status" title="unfurl.support.Status"><code class="xref py py-class docutils literal notranslate"><span class="pre">unfurl.support.Status</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p>.state</p></td>
<td><p>the instance‚Äôs <a class="reference internal" href="api.html#unfurl.support.NodeState" title="unfurl.support.NodeState"><code class="xref py py-class docutils literal notranslate"><span class="pre">unfurl.support.NodeState</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p>.parents</p></td>
<td><p>list of parents</p></td>
</tr>
<tr class="row-even"><td><p>.ancestors</p></td>
<td><p>self and parents</p></td>
</tr>
<tr class="row-odd"><td><p>.root</p></td>
<td><p>root ancestor</p></td>
</tr>
<tr class="row-even"><td><p>.instances</p></td>
<td><p>child instances (via the <code class="docutils literal notranslate"><span class="pre">hostedOn</span></code> relationship)</p></td>
</tr>
<tr class="row-odd"><td><p>.capabilities</p></td>
<td><p>list of capabilities</p></td>
</tr>
<tr class="row-even"><td><p>.requirements</p></td>
<td><p>list of requirements</p></td>
</tr>
<tr class="row-odd"><td><p>.relationships</p></td>
<td><p>relationships that target this capability</p></td>
</tr>
<tr class="row-even"><td><p>.descendents</p></td>
<td><p>(including self)</p></td>
</tr>
<tr class="row-odd"><td><p>.all</p></td>
<td><p>dictionary of child resources with their names as keys</p></td>
</tr>
</tbody>
</table>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="processing.html" class="btn btn-neutral float-left" title="YAML Merge directives" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cli.html" class="btn btn-neutral float-right" title="Command Line" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Adam Souzis.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>